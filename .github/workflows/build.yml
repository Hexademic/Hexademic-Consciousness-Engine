name: Build Unreal Project (Install UE)

on:
  push:
    branches: [ Source ]
  pull_request:
    branches: [ Source ]

jobs:
  build:
    runs-on: windows-latest
    timeout-minutes: 120  # UE installation takes time
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Install Unreal Engine 5.3
      run: |
        # Download Epic Games Launcher installer
        Invoke-WebRequest -Uri "https://launcher-public-service-prod06.ol.epicgames.com/launcher/api/installer/download/EpicGamesLauncherInstaller.msi" -OutFile "EpicInstaller.msi"
        
        # Install Epic Games Launcher silently
        Start-Process msiexec.exe -Wait -ArgumentList '/i EpicInstaller.msi /quiet'
        
        # Note: You'll need to automate the UE installation through Epic Launcher
        # This typically requires Epic Games account credentials and is complex
        
        Write-Host "Epic Games Launcher installed. Manual UE installation required."
      shell: powershell
      
    - name: Setup Build Environment
      run: |
        # Set up Visual Studio Build Tools if needed
        choco install visualstudio2022buildtools --package-parameters "--add Microsoft.VisualStudio.Workload.VCTools"
      shell: powershell
      
    - name: Build Project (Manual Installation Required)
      run: |
        Write-Host "This step requires manual UE installation."
        Write-Host "Consider using self-hosted runners for UE builds."
      shell: powershell
